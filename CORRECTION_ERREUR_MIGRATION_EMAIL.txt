CORRECTION ERREUR MIGRATION - "La clé est trop longue"
========================================================

Date: 2025-01-XX
Problème: Erreur lors de la migration de la table users
Erreur: SQLSTATE[42000]: Syntax error or access violation: 1071 La clé est trop longue. Longueur maximale: 1000

CAUSE:
------
Avec MySQL/MariaDB et l'encodage utf8mb4 (4 octets par caractère), une colonne VARCHAR(255) 
utilise 255 * 4 = 1020 octets, ce qui dépasse la limite de 1000 octets pour les index.

SOLUTION APPLIQUÉE:
-------------------
1. Modification de la migration create_users_table.php:
   - Limitation de la colonne email à 191 caractères (191 * 4 = 764 octets < 1000)
   - Application sur la table users: $table->string('email', 191)->unique()
   - Application sur la table password_reset_tokens: $table->string('email', 191)->primary()

2. Configuration globale dans AppServiceProvider.php:
   - Ajout de Schema::defaultStringLength(191) dans la méthode boot()
   - Cela évite ce problème pour toutes les futures migrations

FICHIERS MODIFIÉS:
------------------
- database/migrations/0001_01_01_000000_create_users_table.php
- database/migrations/2025_12_05_110854_create_favorites_table.php
- app/Providers/AppServiceProvider.php

CORRECTIONS APPLIQUÉES:
------------------------
1. Table users:
   - Colonne email limitée à 191 caractères
   - Colonne email de password_reset_tokens limitée à 191 caractères

2. Table favorites:
   - Colonne favoritable_type limitée à 50 caractères
   - Colonne favoritable_slug limitée à 100 caractères
   - Cela permet à l'index unique composite (user_id, favoritable_type, favoritable_slug)
     de rester sous la limite de 1000 octets

ACTIONS EFFECTUÉES:
-------------------
1. Modification manuelle de la colonne email dans la table users existante
2. Marquage de la migration create_users_table comme exécutée
3. Suppression et recréation de la table favorites avec les bonnes longueurs
4. Exécution réussie de toutes les migrations

RÉSULTAT:
---------
✅ Toutes les migrations ont été exécutées avec succès
✅ La base de données est maintenant complète et fonctionnelle

NOTE:
-----
191 caractères est largement suffisant pour une adresse email (RFC 5321 limite à 320 caractères,
mais en pratique, les emails dépassent rarement 100 caractères).
100 caractères pour favoritable_slug est suffisant pour la plupart des slugs d'articles/formations.

